<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>애드센스 디버그 테스트</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5791689664896394" crossorigin="anonymous"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px;
            background: #f0f0f0;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #333;
            border-radius: 8px;
        }
        .ad-container {
            background: #ffeb3b;
            border: 2px solid red;
            padding: 10px;
            margin: 10px 0;
            min-height: 100px;
        }
        h2 { color: #333; }
        .info { 
            background: #e1f5fe; 
            padding: 10px; 
            margin: 10px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>🔍 애드센스 디버그 테스트</h1>
    
    <div class="info">
        <strong>테스트 목적:</strong> React 없이 순수 HTML에서 애드센스 작동 확인<br>
        <strong>Publisher ID:</strong> ca-pub-5791689664896394<br>
        <strong>도메인:</strong> <span id="domain"></span><br>
        <strong>시간:</strong> <span id="current-time"></span>
    </div>

    <!-- 테스트 1: 기본 광고 -->
    <div class="test-container">
        <h2>테스트 1: 기본 rectangle 광고</h2>
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-5791689664896394"
                 data-ad-slot="2007004200"></ins>
        </div>
    </div>

    <!-- 테스트 2: 크기 지정 광고 -->
    <div class="test-container">
        <h2>테스트 2: 크기 지정 광고 (320x100)</h2>
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:inline-block;width:320px;height:100px"
                 data-ad-client="ca-pub-5791689664896394"
                 data-ad-slot="2007004200"></ins>
        </div>
    </div>

    <!-- 테스트 3: 반응형 광고 -->
    <div class="test-container">
        <h2>테스트 3: 반응형 광고</h2>
        <div class="ad-container">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-5791689664896394"
                 data-ad-slot="8793335020"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
    </div>

    <!-- 진단 정보 -->
    <div class="test-container">
        <h2>🔧 진단 정보</h2>
        <div id="diagnostic-info">로딩 중...</div>
    </div>

    <script>
        // 기본 정보 표시
        document.getElementById('domain').textContent = window.location.hostname;
        document.getElementById('current-time').textContent = new Date().toLocaleString('ko-KR');

        // 진단 정보 수집
        function collectDiagnostics() {
            const info = [];
            
            // 애드센스 스크립트 확인
            const adScript = document.querySelector('script[src*="adsbygoogle.js"]');
            info.push(`📜 AdSense 스크립트: ${adScript ? '✅ 로드됨' : '❌ 없음'}`);
            
            // adsbygoogle 객체 확인
            info.push(`🌐 window.adsbygoogle: ${typeof window.adsbygoogle !== 'undefined' ? '✅ 존재' : '❌ 없음'}`);
            
            // 도메인 및 환경 정보
            info.push(`🔗 현재 도메인: ${window.location.hostname}`);
            info.push(`📍 전체 URL: ${window.location.href}`);
            info.push(`📱 뷰포트: ${window.innerWidth}x${window.innerHeight}px`);
            info.push(`🌐 User Agent: ${navigator.userAgent.substring(0, 100)}...`);
            
            // 광고 요소 확인
            const adElements = document.querySelectorAll('.adsbygoogle');
            info.push(`📦 .adsbygoogle 요소 개수: ${adElements.length}개`);
            
            // 각 광고 요소의 상태 확인
            adElements.forEach((ad, index) => {
                const rect = ad.getBoundingClientRect();
                const hasContent = ad.innerHTML.trim().length > 0;
                info.push(`📋 광고 ${index + 1}: ${rect.width}x${rect.height}px, 콘텐츠: ${hasContent ? '✅' : '❌'}`);
            });
            
            return info.join('<br>');
        }

        // 애드센스 초기화 및 진단
        function initializeAds() {
            const diagnosticDiv = document.getElementById('diagnostic-info');
            
            try {
                // 광고 초기화
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
                
                // 진단 정보 표시
                setTimeout(() => {
                    diagnosticDiv.innerHTML = collectDiagnostics();
                }, 2000);
                
                // 에러 감지
                window.addEventListener('error', function(e) {
                    console.error('페이지 에러:', e.error);
                });
                
            } catch (error) {
                diagnosticDiv.innerHTML = `❌ 초기화 실패: ${error.message}<br>` + collectDiagnostics();
            }
        }

        // 페이지 로드 후 실행
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeAds);
        } else {
            initializeAds();
        }
    </script>
</body>
</html>